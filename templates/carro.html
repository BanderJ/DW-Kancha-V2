{% extends "maestra.html" %}
{% block link %}
<link rel="stylesheet" href="{{url_for('static', filename='css/carro.css')}}" />
{% endblock %}

{% block contenido %}
<div class="container">
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th style="width: 25%;">Nombre</th>
        <th style="width: 10%;">Cantidad</th>
        <th style="width: 10%;">Precio</th>
        <th style="width: 20%;">Imagen</th>
        <th style="width: 15%;">Subtotal</th>
        <th style="width: 5%;"></th>
      </tr>
    </thead>
    <tbody>
      {% for categoria in lista %}
      <tr>
        <td>{{categoria[2]}} {{categoria[3]}}</td>
        <td>
          <div class="d-flex justify-content-center align-items-center">
            <form action="{{ url_for('actualizar_cantidad_menos') }}" method="POST">
              <input type="hidden" name="id_det_vta" value="{{categoria[0]}}">
              <input type="hidden" name="id_producto" value="{{categoria[9]}}">
              <input type="hidden" name="id_carrito" value="{{categoria[8]}}">
              <button class="btn btn-sm btn-primary">-</button>
            </form>
            <span id="cantidad-{{categoria[0]}}" class="mx-2">{{categoria[5]}}</span>
            <form action="{{ url_for('actualizar_cantidad_mas') }}" method="POST">
              <input type="hidden" name="id_det_vta" value="{{categoria[0]}}">
              <input type="hidden" name="id_producto" value="{{categoria[9]}}">
              <input type="hidden" name="id_carrito" value="{{categoria[8]}}">
              <button class="btn btn-sm btn-primary">+</button>
            </form>
          </div>
        </td>
        <td>{{categoria[4]}}</td>
        <!-- Asegúrate de tener las imágenes en un tamaño adecuado -->
        <td><img id="imgcarrito" src="{{ url_for('static', filename='img/' + categoria[6]) }}" alt="" style="max-width: 100px; height: auto;"></td>
        <!-- Aquí hacemos la operación de multiplicación directamente en Jinja -->
        <td>{{ categoria[4] * categoria[5] }}</td>
        <td>
          <form action="{{ url_for('eliminar_detalle_venta') }}" method="POST">
            <input type="hidden" name="id_det_vta" value="{{categoria[0]}}">
            <input type="hidden" name="id_producto" value="{{categoria[9]}}">
            <input type="hidden" name="id_carrito" value="{{categoria[8]}}">
            <button type="submit" class="btn btn-danger btn-sm">X</button>
          </form>
        </td>
        
        
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <center><a href="{{url_for('redirigirPago')}}"><button>IR A PAGAR</button></a></center>
</div>
{% endblock %}

{% block js %}
<script src="{{url_for('static', filename='js/carro.js')}}"></script>
{% endblock %}
